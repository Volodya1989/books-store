{"mappings":"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","sources":["src/index.js","src/js/render-categories-list.js","src/js/render-categories-books.js","src/js/choose-category.js","src/js/render-category-books.js"],"sourcesContent":["import './js/switch-theme';\nimport './js/extra-block-slider';\nimport './js/modal-window';\nimport './js/burger-menu';\nimport './js/render-categories-list';\nimport './js/render-categories-books';\nimport './js/books-action';\nimport './js/choose-category';\nimport './js/render-category-books';\nimport './js/shopping-list';\nimport './js/color-swithcer';\n","// Логіка, яка рендерить список категорій\n// Визиваеться одразу в index.js\nimport { fetchAllCategories } from './fetch-func';\nimport { shopping_info } from './shopping-list';\n\nimport { renderTheme } from './switch-theme';\n\nconst categoryList = document.querySelector('.category-list');\nconst loadCategory = document.querySelector('.load');\n\nfetchAllCategories()\n  .then(data => {\n    console.log(data);\n    const markup = data\n      .map(({ list_name }) => {\n        return `<li class=\"category-list-item global-list light-theme theme-switch\">${list_name}</li>`;\n      })\n      .join('');\n    categoryList.insertAdjacentHTML('beforeend', markup);\n    shopping_info.theme === 'light'\n      ? renderTheme('light')\n      : renderTheme('dark');\n    loadCategory.classList.add('unvisible');\n  })\n  .catch(error => {\n    console.log(error);\n  });\n","// рендер всіх секцій категорій з книгами\n// Для цього можна використовувати масив категорій і по циклу визивати renderCategoryBooks(category)\n\nimport { fetchAllCategories } from './fetch-func';\n// import { renderCategoryBooks, renderTopBooks } from './render-category-books';\n\n// одразу рендеремо секцію топ\n// renderTopBooks();\n","// логіка, коли вибираешь категорію\n\nimport { fetchBooksByExactCategory } from './fetch-func';\n","// Рендер однієї секції категорії з книгами\nimport { fetchBooksByExactCategory, fetchTopBooks } from './fetch-func';\n\nexport function renderCategoryBooks() {}\n\nimport { modalWindow } from './modal-window';\nimport { shopping_info } from './shopping-list';\nimport { renderTheme } from './switch-theme';\n// export function renderCategoryBooks() { }\n\nconst categoryList = document.querySelector('.category-list');\nconst bookThumb = document.querySelector('.tb-container');\nconst headingEl = document.querySelector('.heading-primary');\nconst allCtgrEl = document.querySelector('#allctgr');\n\ncategoryList.addEventListener('click', renderCategoryBooks);\nasync function renderCategoryBooks(event) {\n  const item = event.target.textContent;\n  const itemFirst = allCtgrEl.textContent;\n\n  if (item === itemFirst) {\n    bookThumb.innerHTML = '';\n    fetchTopBooks().then(renderTopBooks);\n    const headingMarkup = 'Best Sellers Books';\n    const startHeading = headingMarkup\n      .split(' ')\n      .splice(0, headingMarkup.split(' ').length - 1)\n      .join(' ');\n    const endHeading =\n      headingMarkup.split(' ')[headingMarkup.split(' ').length - 1];\n    headingEl.innerHTML = `${startHeading} <span class=\"colored-heading\">${endHeading}</span>`;\n  } else {\n    const startHeading = item\n      .split(' ')\n      .splice(0, item.split(' ').length - 1)\n      .join(' ');\n    const endHeading = item.split(' ')[item.split(' ').length - 1];\n    headingEl.innerHTML = `${startHeading} <span class=\"colored-heading\">${endHeading}</span>`;\n    headingEl.classList.add('ctg-maintitle');\n    bookThumb.classList.add('flex-container');\n\n    const data = await fetchBooksByExactCategory(item);\n    createMarkupBook(data);\n  }\n}\n\nfunction createMarkupBook({ data }) {\n  bookThumb.innerHTML = '';\n  const markup = data\n\n    .map(({ author, title, book_image, _id }) => {\n      return `\n          <li class=\"flex-container-item\">\n            <a href=# class=\"global-link\" data-id=\"${_id}\">\n              <div class=\"tb-book-card\">\n                <img class=\"tb-book-img img\" src=\"${book_image}\" alt=\"${title}\" loading=\"lazy\">\n                <p class=\"tb-book-title light-theme theme-switch global-p\">${title}</p>\n                <p class=\"tb-book-author global-p\">${author}</p>\n              </div>\n            </a>\n          </li>`;\n    })\n    .join('');\n  bookThumb.innerHTML = markup;\n}\n\n// export function renderTopBooks() { }\n\nconst noBooksEl = document.querySelector('.no-books-card');\n\nfetchTopBooks().then(renderTopBooks);\n\nexport function renderTopBooks(bestsellersArray) {\n  if (bestsellersArray.data.length == 0) {\n    noBooksEl.classList.remove('is-hidden');\n  } else {\n    const markupCategory = bestsellersArray.data\n      .map(({ list_name, books }) => {\n        const markup = books\n          .map(({ author, title, book_image, _id }) => {\n            return `\n          <li class=\"flex-container-item\">\n            <a href=# class=\"global-link\" data-id=\"${_id}\">\n              <div class=\"tb-book-card\">\n                <img class=\"tb-book-img img\" src=\"${book_image}\" alt=\"${title}\" loading=\"lazy\">\n                <p class=\"tb-book-title light-theme theme-switch global-p\">${title}</p>\n                <p class=\"tb-book-author global-p\">${author}</p>\n              </div>\n            </a>\n          </li>\n          `;\n          })\n          .join('');\n        return `\n      <li class=\"tb-category-container\">\n        <h2 class='tb-category global-title'>${list_name}</h2>\n        <div class='tb-books-container'>\n          <ul class=\"global-list flex-container\">\n            ${markup}\n          </ul>\n        </div>\n        <button class=\"tb-button global-button light-theme theme-switch\">See more</button>\n      </li>\n      `;\n      })\n      .join('');\n\n    bookThumb.insertAdjacentHTML('beforeend', markupCategory);\n    shopping_info.theme === 'light'\n      ? renderTheme('light')\n      : renderTheme('dark');\n    modalWindow();\n  }\n}\n\n\n\nbookThumb.addEventListener('click', onSeeMoreClick)\n\n async function onSeeMoreClick(event) {\n   if (event.target.matches('button')) {\n     let bookTitle = event.target.closest('.tb-category-container').firstChild.nextSibling.textContent\n     let categoryContainer = event.target.closest('.tb-category-container').firstChild.nextSibling.nextSibling.nextSibling\n     const startHeading = bookTitle\n      .split(' ')\n      .splice(0, bookTitle.split(' ').length - 1)\n      .join(' ');\n    const endHeading = bookTitle.split(' ')[bookTitle.split(' ').length - 1];\n    headingEl.innerHTML = `${startHeading} <span class=\"colored-heading\">${endHeading}</span>`;\n    bookThumb.classList.add('flex-container');\n    const data = await fetchBooksByExactCategory(bookTitle);\n     createMarkupSeeMore(data, categoryContainer);\n     event.target.classList.add('is-hidden')\n   }\n}\n\nfunction createMarkupSeeMore({ data },categoryContainer) {\n  const markup = data\n    .map(({ author, title, book_image, _id }) => {\n      return `\n          <li class=\"flex-container-item\">\n            <a href=# class=\"global-link\" data-id=\"${_id}\">\n              <div class=\"tb-book-card\">\n                <img class=\"tb-book-img img\" src=\"${book_image}\" alt=\"${title}\" loading=\"lazy\">\n                <p class=\"tb-book-title light-theme theme-switch global-p\">${title}</p>\n                <p class=\"tb-book-author global-p\">${author}</p>\n              </div>\n            </a>\n          </li>`;\n    })\n    .join('');\n  const seeMoreMarkup = `<ul class=\"global-list flex-container\">\n            ${markup}\n          </ul>`\n  categoryContainer.innerHTML = seeMoreMarkup;\n}"],"names":["parcelRequire","$5DwtN","$3028f4cd151baf40$var$categoryList","document","querySelector","$3028f4cd151baf40$var$loadCategory","fetchAllCategories","then","data","console","log","markup","map","list_name","join","insertAdjacentHTML","$jJ57b","shopping_info","theme","$gyeM6","renderTheme","classList","add","catch","error","$11b1bb17ee1ab8b3$var$categoryList","$11b1bb17ee1ab8b3$var$bookThumb","$11b1bb17ee1ab8b3$var$headingEl","$11b1bb17ee1ab8b3$var$allCtgrEl","addEventListener","async","event","item","target","textContent","itemFirst","innerHTML","fetchTopBooks","$11b1bb17ee1ab8b3$export$897fb17cde4e950b","headingMarkup","startHeading","split","splice","length","endHeading","author","title","book_image","_id","$11b1bb17ee1ab8b3$var$createMarkupBook","fetchBooksByExactCategory","$11b1bb17ee1ab8b3$var$noBooksEl","bestsellersArray","remove","markupCategory","books","$2hTmC","modalWindow","matches","bookTitle","closest","firstChild","nextSibling","categoryContainer","seeMoreMarkup","$11b1bb17ee1ab8b3$var$createMarkupSeeMore"],"version":3,"file":"index.20f12f8a.js.map"}