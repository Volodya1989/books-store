{"mappings":"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","sources":["src/index.js","src/js/render-categories-list.js","src/js/render-categories-books.js","src/js/choose-category.js","src/js/render-category-books.js"],"sourcesContent":["import './js/switch-theme';\nimport './js/extra-block-slider';\nimport './js/modal-window';\nimport './js/burger-menu';\nimport './js/render-categories-list';\nimport './js/render-categories-books';\nimport './js/books-action';\nimport './js/choose-category';\nimport './js/render-category-books';\nimport './js/shopping-list';\nimport './js/color-swithcer';\n","// Логіка, яка рендерить список категорій\n// Визиваеться одразу в index.js\nimport { fetchAllCategories } from './fetch-func';\nimport { shopping_info } from './shopping-list';\n\nimport { renderTheme } from './switch-theme';\n\nconst categoryList = document.querySelector('.category-list');\nconst loadCategory = document.querySelector('.load');\n\nfetchAllCategories()\n  .then(data => {\n    console.log(data);\n    const markup = data\n      .map(({ list_name }) => {\n        return `<li class=\"category-list-item global-list light-theme theme-switch\">${list_name}</li>`;\n      })\n      .join('');\n    categoryList.insertAdjacentHTML('beforeend', markup);\n\n    const lis = document.querySelectorAll('.category-list-item');\n\n    lis.forEach(e => {\n      e.addEventListener('click', activatedCategory);\n\n      function activatedCategory() {\n        lis.forEach(e => e.classList.remove('active'));\n        this.classList.add('active');\n      }\n    });\n\n    shopping_info.theme === 'light'\n      ? renderTheme('light')\n      : renderTheme('dark');\n    loadCategory.classList.add('unvisible');\n  })\n  .catch(error => {\n    console.log(error);\n  });\n","// рендер всіх секцій категорій з книгами\n// Для цього можна використовувати масив категорій і по циклу визивати renderCategoryBooks(category)\n\nimport { fetchAllCategories } from './fetch-func';\n// import { renderCategoryBooks, renderTopBooks } from './render-category-books';\n\n// одразу рендеремо секцію топ\n// renderTopBooks();\n","// логіка, коли вибираешь категорію\n\nimport { fetchBooksByExactCategory } from './fetch-func';\n","// Рендер однієї секції категорії з книгами\nimport { fetchBooksByExactCategory, fetchTopBooks } from './fetch-func';\n\nexport function renderCategoryBooks() {}\n\nimport { modalWindow } from './modal-window';\nimport { shopping_info } from './shopping-list';\nimport { renderTheme } from './switch-theme';\n// export function renderCategoryBooks() { }\n\nconst categoryList = document.querySelector('.category-list');\nconst bookThumb = document.querySelector('.tb-container');\nconst headingEl = document.querySelector('.heading-primary');\nconst allCtgrEl = document.querySelector('#allctgr');\nconst loader = document.querySelector('.loader');\n\ncategoryList.addEventListener('click', renderCategoryBooks);\nsetTimeout(e => {\n  loader.classList.add('is-hidden');\n}, 2500);\nasync function renderCategoryBooks(event) {\n  loader.classList.remove('is-hidden');\n  const item = event.target.textContent;\n  console.log(item);\n  const itemFirst = allCtgrEl.textContent;\n\n  if (item === itemFirst) {\n    bookThumb.innerHTML = '';\n    fetchTopBooks().then(renderTopBooks);\n    const headingMarkup = 'Best Sellers Books';\n    const startHeading = headingMarkup\n      .split(' ')\n      .splice(0, headingMarkup.split(' ').length - 1)\n      .join(' ');\n    const endHeading =\n      headingMarkup.split(' ')[headingMarkup.split(' ').length - 1];\n    headingEl.innerHTML = `${startHeading} <span class=\"colored-heading\">${endHeading}</span>`;\n  } else {\n    const startHeading = item\n      .split(' ')\n      .splice(0, item.split(' ').length - 1)\n      .join(' ');\n    const endHeading = item.split(' ')[item.split(' ').length - 1];\n    headingEl.innerHTML = `${startHeading} <span class=\"colored-heading\">${endHeading}</span>`;\n    headingEl.classList.add('ctg-maintitle');\n    bookThumb.classList.add('flex-container');\n\n    const data = await fetchBooksByExactCategory(item);\n    loader.classList.add('is-hidden');\n\n    createMarkupBook(data);\n  }\n}\n\nfunction createMarkupBook({ data }) {\n  bookThumb.innerHTML = '';\n  const markup = data\n    .map(({ author, title, book_image, _id }) => {\n      return `\n          <li class=\"flex-container-item\">\n            <a href=# class=\"global-link\" data-id=\"${_id}\">\n              <div class=\"tb-book-card\">\n                <img class=\"tb-book-img img\" src=\"${book_image}\" alt=\"${title}\" loading=\"lazy\">\n                <p class=\"tb-book-title light-theme theme-switch global-p\">${title}</p>\n                <p class=\"tb-book-author global-p\">${author}</p>\n              </div>\n            </a>\n          </li>`;\n    })\n    .join('');\n\n  bookThumb.innerHTML = markup;\n}\n\n// export function renderTopBooks() { }\n\nconst noBooksEl = document.querySelector('.no-books-card');\n\nfetchTopBooks().then(renderTopBooks);\n\nexport function renderTopBooks(bestsellersArray) {\n  if (bestsellersArray.data.length == 0) {\n    noBooksEl.classList.remove('is-hidden');\n  } else {\n    const markupCategory = bestsellersArray.data\n      .map(({ list_name, books }) => {\n        const markup = books\n          .map(({ author, title, book_image, _id }) => {\n            return `\n          <li class=\"flex-container-item\">\n            <a href=# class=\"global-link\" data-id=\"${_id}\">\n              <div class=\"tb-book-card\">\n                <img class=\"tb-book-img img\" src=\"${book_image}\" alt=\"${title}\" loading=\"lazy\">\n                <p class=\"tb-book-title light-theme theme-switch global-p\">${title}</p>\n                <p class=\"tb-book-author global-p\">${author}</p>\n              </div>\n            </a>\n          </li>\n          `;\n          })\n          .join('');\n        return `\n      <li class=\"tb-category-container\">\n        <h2 class='tb-category global-title'>${list_name}</h2>\n        <div class='tb-books-container'>\n          <ul class=\"global-list flex-container\">\n            ${markup}\n          </ul>\n        </div>\n        <button class=\"tb-button global-button light-theme theme-switch\">See more</button>\n      </li>\n      `;\n      })\n      .join('');\n    loader.classList.add('is-hidden');\n\n    bookThumb.insertAdjacentHTML('beforeend', markupCategory);\n    shopping_info.theme === 'light'\n      ? renderTheme('light')\n      : renderTheme('dark');\n    modalWindow();\n  }\n}\n\nbookThumb.addEventListener('click', onSeeMoreClick);\n\nasync function onSeeMoreClick(event) {\n  if (event.target.matches('button')) {\n    let bookTitle = event.target.closest('.tb-category-container').firstChild\n      .nextSibling.textContent;\n    let categoryContainer = event.target.closest('.tb-category-container')\n      .firstChild.nextSibling.nextSibling.nextSibling;\n    const data = await fetchBooksByExactCategory(bookTitle);\n    createMarkupSeeMore(data, categoryContainer);\n    event.target.classList.add('is-hidden');\n  }\n}\n\nfunction createMarkupSeeMore({ data }, categoryContainer) {\n  const markup = data\n    .map(({ author, title, book_image, _id }) => {\n      return `\n          <li class=\"flex-container-item\">\n            <a href=# class=\"global-link\" data-id=\"${_id}\">\n              <div class=\"tb-book-card\">\n                <img class=\"tb-book-img img\" src=\"${book_image}\" alt=\"${title}\" loading=\"lazy\">\n                <p class=\"tb-book-title light-theme theme-switch global-p\">${title}</p>\n                <p class=\"tb-book-author global-p\">${author}</p>\n              </div>\n            </a>\n          </li>`;\n    })\n    .join('');\n  const seeMoreMarkup = `<ul class=\"global-list flex-container\">\n            ${markup}\n          </ul>`;\n  categoryContainer.innerHTML = seeMoreMarkup;\n}\n"],"names":["parcelRequire","$eUV6u","$c63f1ae5d013a326$var$categoryList","document","querySelector","$c63f1ae5d013a326$var$loadCategory","fetchAllCategories","then","data","console","log","markup","map","param","list_name","concat","join","insertAdjacentHTML","lis","querySelectorAll","forEach","e1","addEventListener","e","classList","remove","this","add","$4WFAO","shopping_info","theme","$b3EoS","renderTheme","catch","error","$bpxeT","$d8a5ac29b53e8bc6$var$categoryList","$d8a5ac29b53e8bc6$var$bookThumb","$d8a5ac29b53e8bc6$var$headingEl","$d8a5ac29b53e8bc6$var$allCtgrEl","$d8a5ac29b53e8bc6$var$loader","$d8a5ac29b53e8bc6$var$_renderCategoryBooks","$parcel$interopDefault","$2TvXO","mark","_callee","event","item","itemFirst","headingMarkup","startHeading","endHeading","startHeading1","endHeading1","target","textContent","innerHTML","fetchTopBooks","$d8a5ac29b53e8bc6$export$897fb17cde4e950b","split","splice","length","fetchBooksByExactCategory","_ctx","sent","$d8a5ac29b53e8bc6$var$createMarkupBook","apply","arguments","param1","author","title","book_image","_id","setTimeout","$d8a5ac29b53e8bc6$var$noBooksEl","bestsellersArray","markupCategory","param2","books","$6VMVE","modalWindow","$d8a5ac29b53e8bc6$var$_onSeeMoreClick","bookTitle","categoryContainer","matches","closest","firstChild","nextSibling","$d8a5ac29b53e8bc6$var$createMarkupSeeMore","param3","seeMoreMarkup"],"version":3,"file":"index.94eee653.js.map"}